<div id="set-accordionPanel">
  <ngx-masonry>
    <div ngxMasonryItem class="set-masonry-item col-lg-3 col-md-4 col-12" *ngFor="let group of groups">
      <mat-accordion>
        <mat-expansion-panel class="set-content" (afterExpand)="updateMasonry()" (afterCollapse)="updateMasonry()">

          <mat-expansion-panel-header>
            <h2>{{group[0]}}</h2>
          </mat-expansion-panel-header>

          <!-- LOOP -->
          <div *ngIf="group[0] === 'PLAYBACK'">
            <div class="singleSetting">
              <mat-slide-toggle [(ngModel)]="loopSelected"
                            [labelPosition]="'after'" (change)="toggleLoop(loopSelected)">
                Loop<a [matTooltip]="'Loop media once playback has completed'"
                       [matTooltipPosition]="'after'">
                <img class="set-info" alt="Info Icon with link to setting description" src="assets/images/question.png">
              </a>
              </mat-slide-toggle>
            </div>

            <!-- AutoPlay -->
            <div class="singleSetting">
              <mat-slide-toggle [(ngModel)]="autoPlaySelected"
                            [labelPosition]="'after'" (change)="toggleAutoPlay(autoPlaySelected)">
                Auto-Play<a [matTooltip]="'Automatic starup of the media once it is loaded'"
                            [matTooltipPosition]="'after'">
                <img class="set-info" alt="Info Icon with link to setting description" src="assets/images/question.png">
              </a>
              </mat-slide-toggle>
            </div>
          </div>

          <!-- DRM -->
          <div *ngIf="group[0] === 'DRM SYSTEM'">
            <div class="singleSetting">
              <mat-slide-toggle [(ngModel)]="drmSelected"
                            [labelPosition]="'after'" (change)="toggleDRM(drmSelected); updateMasonry()">
                Add DRM Key System<a [matTooltip]="'Add a DRM Key System'"
                                     [matTooltipPosition]="'after'">
                <img class="set-info" alt="Info Icon with link to setting description" src="assets/images/question.png">
              </a>
              </mat-slide-toggle>
            </div>

            <div *ngIf="drmSelected">
              <div class="singleSetting">
                <mat-radio-group aria-labelledby="Radio-Button-Settings" class="set-radioButtonSettingGroup">
                  <mat-radio-button *ngFor="let option of drmKeySystems | keyvalue" [value]="option.key"
                                    [checked]="option.value" (change)="changeDRMKeySystem(option.key)">
                    {{option.key}}
                  </mat-radio-button>
                </mat-radio-group>
              </div>
              <div class="singleSetting">
                <mat-form-field>
                  <mat-label>License URL</mat-label>
                  <input #inputField name="License URL" matInput (change)="setLicenseURL(inputField.value)">
                </mat-form-field>
              </div>
            </div>
          </div>
          <!-- DRM END -->

          <!-- Text Settings -->
          <div class="singleSetting" *ngIf="group[0] === 'INITIAL'">
            <mat-slide-toggle [(ngModel)]="checked"
                          [labelPosition]="'after'"
                          (change)="updateTextDefaultEnabled(checked)">
              Enable Text At Loading
              <img [matTooltip]="'Enable subtitle on loading text'"
                   [matTooltipPosition]="'after'"
                   class="set-info" alt="Info Icon with link to setting description" src="assets/images/question.png">
            </mat-slide-toggle>
            <mat-slide-toggle [(ngModel)]="checked"
                          [labelPosition]="'after'"
                          (change)="updateEnableForcedTextStreaming(checked)">
              Force Text Streaming
              <img [matTooltip]="'Force Text Streaming'"
                   [matTooltipPosition]="'after'"
                   class="set-info" alt="Info Icon with link to setting description" src="assets/images/question.png">
            </mat-slide-toggle>

            <div class="fields">
              <mat-form-field>
                <mat-label>Text initial lang</mat-label>
                <input [type]="'text'" matInput placeholder="Text initial lang, e.g. 'en'"
                       (change)="updateMediaSettings('lang', $event)">
              </mat-form-field>
              <mat-form-field>
                <mat-label>Text initial role</mat-label>
                <input [type]="'text'" matInput placeholder="Text initial role, e.g. 'caption'"
                       (change)="updateMediaSettings('role', $event)">
              </mat-form-field>
              <mat-form-field>
                <mat-label>Audio initial lang</mat-label>
                <input [type]="'text'" matInput placeholder="Audio initial lang, e.g. 'en'"
                       (change)="updateMediaSettings('audio', $event)">
              </mat-form-field>
              <mat-form-field>
                <mat-label>Video initial role</mat-label>
                <input [type]="'text'" matInput placeholder="Video initial role, e.g. 'alternate'"
                       (change)="updateMediaSettings('video', $event)">
              </mat-form-field>
            </div>
          </div>

          <div class="singleSetting" *ngFor="let setting of group[1] | keyvalue:keepOrder">

            <!-- Checkboxes -->
            <div *ngIf="isBoo(setting.value[0])">
              <mat-slide-toggle [(ngModel)]="checked"
                            [labelPosition]="'after'" (change)="update(setting.value[1], checked)">
                {{setting.key}}<a [matTooltip]="getApiDescription(group[0], setting.key)"
                                  [matTooltipPosition]="'after'"
                                  href="http://cdn.dashjs.org/latest/jsdoc/module-Settings.html"
                                  target="_blank">
                <img class="set-info" alt="Info Icon with link to setting description" src="assets/images/question.png">
              </a>
              </mat-slide-toggle>
            </div>

            <!-- Input Fields -->
            <div *ngIf="isInput(setting.value[0]) && !isLogLevel(setting.key)" class="fields">
              <mat-form-field [matTooltip]="getApiDescription(group[0], setting.key)">
                <mat-label>{{setting.key}}</mat-label>
                <input #inputField [type]="(setting.value[0] !== 'null' ) ? 'number' : 'text'" name="{{setting.key}}"
                       matInput placeholder="placeholder" value="{{setting.value[0]}}"
                       (change)="update(setting.value[1], inputField.value)">
              </mat-form-field>
            </div>

            <!-- Grouped Settings -->
            <div *ngIf="isGroup(setting.value[1])" class="singleSubSetting my-3">
              <h3>{{setting.key}}<a [matTooltip]="getApiDescription(group[0], setting.key)"
                                    [matTooltipPosition]="'after'"
                                    href="http://cdn.dashjs.org/latest/jsdoc/module-Settings.html"
                                    target="_blank">
                <img class="set-info" alt="Info Icon with link to setting description" src="assets/images/question.png">
              </a></h3>
              <hr>
              <div *ngFor="let sub of setting.value">
                <div class="groupSubSetting" *ngFor="let subset of sub | keyvalue">
                  <div *ngIf="isInput(subset.value[0])">
                    <mat-form-field>
                      <mat-label>{{subset.key}}</mat-label>
                      <input #inputField [type]="(setting.value[0] !== 'null' ) ? 'number' : 'text'"
                             name="{{subset.key}}" matInput placeholder="placeholder" value="{{subset.value[0]}}"
                             (change)="update(subset.value[1], inputField.value)">
                    </mat-form-field>
                  </div>
                  <mat-slide-toggle *ngIf="isBoo(subset.value[0])"
                                [(ngModel)]="checked"
                                [labelPosition]="'after'" (change)="update(subset.value[1], checked)">
                    {{subset.key}}
                  </mat-slide-toggle>

                  <div *ngIf="isRadio(subset.value[0]) && !isLogLevel(setting.key)" class="radio">
                    <label class="Radio-Button-Settings">{{subset.key}}:</label>
                    <div *ngFor="let cons of constants | keyvalue">
                      <div *ngIf="compare(cons.key, setting.key)">
                        <div *ngFor="let subConst of cons.value | keyvalue">
                          <div *ngIf="compare(subConst.key, subset.key)">
                            <mat-radio-group aria-labelledby="Radio-Button-Settings"
                                             class="set-radioButtonSettingGroup">
                              <mat-radio-button *ngFor="let option of subConst.value | keyvalue" [value]="option.key"
                                                [checked]="option.value" (change)="update(subset.value[1] ,option.key)">
                                {{option.key}}
                              </mat-radio-button>
                            </mat-radio-group>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </div>

            <!-- Radio Buttons: Log Level -->
            <div *ngIf="isLogLevel(setting.key)" class="radio">
              <label class="Radio-Button-Settings">{{setting.key}}:<a
                [matTooltip]="getApiDescription(group[0], setting.key)"
                [matTooltipPosition]="'after'"
                href="http://cdn.dashjs.org/latest/jsdoc/module-Settings.html"
                target="_blank">
                <img class="set-info" alt="Info Icon with link to setting description" src="assets/images/question.png">
              </a></label>
              <mat-radio-group aria-labelledby="Radio-Button-Settings" class="set-radioButtonSettingGroup">
                <mat-radio-button *ngFor="let option of constants.logLevel | keyvalue" [value]="option.key"
                                  [checked]="option.value" (change)="updateLogLevel(option.key)">
                  {{option.key}}
                </mat-radio-button>
              </mat-radio-group>
            </div>

            <!-- Radio Buttons -->
            <div *ngIf="isRadio(setting.value[0]) && !isLogLevel(setting.key)" class="radio">
              <label class="Radio-Button-Settings">{{setting.key}}:<a
                [matTooltip]="getApiDescription(group[0], setting.key)"
                [matTooltipPosition]="'after'"
                href="http://cdn.dashjs.org/latest/jsdoc/module-Settings.html"
                target="_blank">
                <img class="set-info" alt="Info Icon with link to setting description" src="assets/images/question.png">
              </a></label>
              <div *ngFor="let cons of constants | keyvalue">
                <div *ngIf="compare(cons.key, setting.key)">
                  <mat-radio-group aria-labelledby="Radio-Button-Settings" class="set-radioButtonSettingGroup">
                    <mat-radio-button *ngFor="let option of cons.value | keyvalue" [value]="option.key"
                                      [checked]="option.value" (change)="update(setting.value[1] ,option.key)">
                      {{format(option.key)}}
                    </mat-radio-button>
                  </mat-radio-group>
                </div>
              </div>
            </div>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
  </ngx-masonry>
</div>
<mat-divider></mat-divider>
